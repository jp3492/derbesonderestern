---
import { Image } from 'astro:assets';

// Import all images from the assets folder
const images = await import.meta.glob<{ default: ImageMetadata }>('/src/assets/*.{jpeg,jpg,png,gif}');
const imagePaths = Object.values(images);
---

<div class="gallery">
  {imagePaths.length > 0 ? (
    imagePaths.map((image) => (
      <Image
        src={image.default}
        widths={[400, 800, 1200]}
        sizes="(max-width: 600px) 90vw, (max-width: 960px) 45vw, 300px"
        alt="An origami creation."
        loading="lazy"
        decoding="async"
      />
    ))
  ) : (
    <p>Your images will appear here. Just drop them into the <code>/src/assets</code> folder.</p>
  )}
</div>

<style>
  .gallery :global(img) {
    width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  p {
    font-style: italic;
    text-align: center;
    grid-column: 1 / -1; /* Span all columns if gallery is empty */
  }
</style>